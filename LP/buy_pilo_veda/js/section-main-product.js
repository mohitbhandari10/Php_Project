if(typeof ProductPage!="function"){class ProductPage2 extends HTMLElement{constructor(){if(super(),this.productGallery=this.querySelector("[data-js-product-gallery]"),this.productSlider=this.querySelector("css-slider"),this.pickupAvailabilityCompact=this.querySelector("pickup-availability-compact"),this.pickupAvailabilityExtended=this.querySelector("pickup-availability-extended"),this.productSlider){const productGaleryThumbnails=this.querySelector(".product-gallery__thumbnails-holder");this.querySelector(".product-gallery__thumbnails .thumbnail")&&(this.querySelectorAll(".product-gallery__thumbnails .thumbnail").forEach((elm,i)=>{i==0&&elm.classList.add("active"),elm.addEventListener("click",e=>{this.productSlider.sliderEnabled?this.productSlider.changeSlide(e.currentTarget.dataset.index):(window.scrollTo({top:this.productGallery.querySelector(`.product-gallery-item[data-index="${e.currentTarget.dataset.index}"]`).offsetTop+this.offsetTop,behavior:"smooth"}),this.thumbnailNavigationHelper(e.currentTarget.dataset.index)),this._pauseAllMedia(),this._playMedia(this.productGallery.querySelector(`.product-gallery-item[data-index="${e.currentTarget.dataset.index}"]`)),productGaleryThumbnails.scrollTo({left:elm.offsetLeft-50,behaviour:"smooth"})})}),this.productSlider.addEventListener("change",e=>{this.thumbnailNavigationHelper(e.target.index)})),this.productSlider.addEventListener("navigation",e=>{this._playMedia(this.productGallery.querySelector(`.product-gallery-item[data-index="${e.target.index}"]`))}),this.productSlider.addEventListener("change",e=>{this._pauseAllMedia(),this.productGallery.querySelector(`.product-gallery-item[data-index="${e.target.index}"]`).dataset.productMediaType=="model"&&(this.xrButton&&this.xrButton.setAttribute("data-shopify-model3d-id",this.productGallery.querySelector(`.product-gallery-item[data-index="${e.target.index}"]`).dataset.mediaId),setTimeout(()=>{this.productSlider.querySelector(".css-slider-holder").classList.add("css-slider--disable-dragging")},150))}),this.productSlider.addEventListener("ready",e=>{this.firstProductGalleryIndex&&this.productSlider.changeSlide(this.firstProductGalleryIndex,"auto");const productSlides=this.productSlider.querySelectorAll(".product-gallery-item"),productFigures=this.querySelectorAll(".apply-gallery-animation");this.productSlider.addEventListener("scroll",()=>{const scrollX=-this.productSlider.element.scrollLeft;productSlides.forEach((slide,i)=>{const media=productFigures[i];media&&(media.style.transform=`translateX(${(slide.offsetLeft+scrollX)*-1/3}px)`)})})})}if(this.productVariants=this.querySelector("product-variants"),this.productVariants&&(this.productVariants.addEventListener("VARIANT_CHANGE",this.onVariantChangeHandler.bind(this)),this.onVariantChangeHandler({target:this.productVariants})),!document.body.classList.contains("template-cart")&&KROWN.settings.cart_action=="overlay"){let addToCartEnter=!1;this.querySelector("[data-js-product-add-to-cart]")&&this.querySelector("[data-js-product-add-to-cart]").addEventListener("keyup",e=>{e.keyCode==window.KEYCODES.RETURN&&(addToCartEnter=!0)}),this.querySelector("[data-js-product-form]")&&this.querySelector("[data-js-product-form]").addEventListener("add-to-cart",()=>{document.getElementById("site-cart-sidebar").show(),document.getElementById("cart-recommendations")&&document.getElementById("cart-recommendations").generateRecommendations(),addToCartEnter&&setTimeout(()=>{document.querySelector("#site-cart-sidebar [data-js-close]").focus()},200)})}this.querySelectorAll("product-model").length>0&&(window.ProductModel.loadShopifyXR(),this.xrButton=this.querySelector(".product-gallery__view-in-space"));const addToCartButton=this.querySelector("[data-js-product-add-to-cart]");addToCartButton&&(addToCartButton.classList.contains("disabled")?this.querySelector("product-form").classList.add("disable-buy-button"):this.querySelector("product-form").classList.remove("disable-buy-button"),new MutationObserver(()=>{addToCartButton.classList.contains("disabled")?this.querySelector("product-form").classList.add("disable-buy-button"):this.querySelector("product-form").classList.remove("disable-buy-button")}).observe(addToCartButton,{attributes:!0,childList:!1,subtree:!1})),this.priceCompact=this.querySelector("[data-js-product-price-compact"),this.priceExtended=this.querySelector("[data-js-product-price-extended"),this.priceCompact&&(this.priceCompact.priceOriginal=this.priceCompact.querySelector("[data-js-product-price-original]"),this.priceCompact.priceCompare=this.priceCompact.querySelector("[data-js-product-price-compare]"),this.priceCompact.priceUnit=this.priceCompact.querySelector("[data-js-product-price-unit]")),this.priceExtended&&(this.priceExtended.priceOriginal=this.priceExtended.querySelector("[data-js-product-price-original]"),this.priceExtended.priceCompare=this.priceExtended.querySelector("[data-js-product-price-compare]"),this.priceExtended.priceUnit=this.priceExtended.querySelector("[data-js-product-price-unit]"))}thumbnailNavigationHelper(index=0){this.querySelectorAll(".product-gallery__thumbnails .thumbnail").forEach((elm,i)=>{i==index?elm.classList.add("active"):elm.classList.remove("active")})}onVariantChangeHandler(e){let variant=e.target.currentVariant;if(variant){if(variant.featured_media!=null){let variantImg=this.productGallery.querySelector('.product-gallery-item[data-media-id="'+variant.featured_media.id+'"]');variantImg&&(this.productGallery.classList.contains("product-gallery--slider")||this.productGallery.classList.contains("product-gallery--scroll")&&window.innerWidth<1024?this.productGallery.querySelector("css-slider")&&this.productGallery.querySelector("css-slider").sliderEnabled?this.productGallery.querySelector("css-slider").changeSlide(variantImg.dataset.index):this.firstProductGalleryIndex=variantImg.dataset.index:window.scrollTo({top:variantImg.offsetTop,behavior:"smooth"}))}this.pickupAvailabilityCompact&&this.pickupAvailabilityCompact.classList.contains("active")&&(this.querySelector("pickup-availability-compact").style.display="block",this.querySelector("pickup-availability-compact").fetchAvailability(variant.id)),this.pickupAvailabilityExtended&&this.pickupAvailabilityExtended.classList.contains("active")&&(this.querySelector("pickup-availability-extended").style.display="block",this.querySelector("pickup-availability-extended").fetchAvailability(variant.id))}else this.pickupAvailabilityCompact&&this.pickupAvailabilityCompact.classList.contains("active")&&(this.querySelector("pickup-availability-compact").style.display="none"),this.pickupAvailabilityExtended&&this.pickupAvailabilityExtended.classList.contains("active")&&(this.querySelector("pickup-availability-extended").style.display="none");this.priceCompact&&(variant?(this.priceCompact.priceOriginal.innerHTML=this.productVariants._formatMoney(variant.price,KROWN.settings.shop_money_format),variant.compare_at_price>variant.price?this.priceCompact.priceCompare.innerHTML=this.productVariants._formatMoney(variant.compare_at_price,KROWN.settings.shop_money_format):this.priceCompact.priceCompare.innerHTML="",variant.unit_price_measurement?this.priceCompact.priceUnit.innerHTML=`
							${this.productVariants._formatMoney(variant.unit_price,KROWN.settings.shop_money_format)} / 
							${variant.unit_price_measurement.reference_value!=1?variant.unit_price_measurement.reference_value+" ":""}
							${variant.unit_price_measurement.reference_unit}
						`:this.priceCompact.priceUnit.innerHTML=""):(this.priceCompact.priceOriginal.innerHTML="",this.priceCompact.priceCompare.innerHTML="",this.priceCompact.priceUnit.innerHTML="")),this.priceExtended&&(variant?(this.priceExtended.priceOriginal.innerHTML=this.productVariants._formatMoney(variant.price,KROWN.settings.shop_money_format),variant.compare_at_price>variant.price?this.priceExtended.priceCompare.innerHTML=`<span>${this.productVariants._formatMoney(variant.compare_at_price,KROWN.settings.shop_money_format)}</span><span>${KROWN.settings.locales.product_compare_price.replace("$SAVE_PRICE",this.productVariants._formatMoney(variant.compare_at_price-variant.price,KROWN.settings.shop_money_format))}</span>`:this.priceExtended.priceCompare.innerHTML="",variant.unit_price_measurement?this.priceExtended.priceUnit.innerHTML=`
							${this.productVariants._formatMoney(variant.unit_price,KROWN.settings.shop_money_format)} / 
							${variant.unit_price_measurement.reference_value!=1?variant.unit_price_measurement.reference_value+" ":""}
							${variant.unit_price_measurement.reference_unit}
						`:this.priceExtended.priceUnit.innerHTML=""):(this.priceExtended.priceOriginal.innerHTML="",this.priceExtended.priceCompare.innerHTML="",this.priceExtended.priceUnit.innerHTML=""))}_pauseAllMedia(){document.querySelectorAll(".product-gallery .js-youtube").forEach(video=>{video.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}),document.querySelectorAll(".product-gallery .js-vimeo").forEach(video=>{video.contentWindow.postMessage('{"method":"pause"}',"*")}),document.querySelectorAll(".product-gallery video").forEach(video=>video.pause()),document.querySelectorAll(".product-gallery product-model").forEach(model=>{model.modelViewerUI&&model.modelViewerUI.pause()})}_playMedia(media){switch(media.dataset.productMediaType){case"video":media.querySelector("video")&&media.querySelector("video").play();break;case"external_video-youtube":media.querySelector(".js-youtube")&&media.querySelector(".js-youtube").contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");break;case"external_video-vimeo":media.querySelector(".js-vimeo")&&media.querySelector(".js-vimeo").contentWindow.postMessage('{"method":"play"}',"*");break}}}typeof customElements.get("product-page")>"u"&&customElements.define("product-page",ProductPage2)}
//# sourceMappingURL=/cdn/shop/t/39/assets/section-main-product.js.map?v=178263199829589827141744286310
